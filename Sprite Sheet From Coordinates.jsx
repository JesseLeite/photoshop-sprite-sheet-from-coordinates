#target photoshop#include "includes/underscore.jsinc"app.preferences.rulerUnits = Units.PIXELS;var document = activeDocument;var activeLayer = document.activeLayer;var spriteWidth = document.width;var spriteHeight = document.height;var layerDepth = 25;document.resizeCanvas(5*spriteWidth, 5*spriteHeight, AnchorPosition.TOPLEFT);function mapLayersByDepth(layers, depth) {    return _.union(_.toArray(layers), _.map(layers, function (layer) {        if (depth > 0) {            return mapLayersByDepth(_.toArray(layer.layers), depth - 1);        } else {            return _.toArray(layer.layers);        }    }));}function getLayersWithCoordinates(layers) {    return _.filter(_.flatten(mapLayersByDepth(layers, layerDepth)), function (layer) {        return layer.name.match(/[0-9],[0-9]/);    });}var moveableLayers = getLayersWithCoordinates(document.layers);_.each(moveableLayers, function (layer) {    translateX = (layer.name.substring(0, 1) - 1) * spriteWidth;    translateY = (layer.name.substring(2, 3) - 1) * spriteHeight;    layer.visible = 1;    layer.translate(translateX, translateY);});